# Проект Cards Shop Spring

## Текущая задача
Разработка бэкенда для минисайта с функциональностью работы с товарами и корзиной.

## Планирование

### Этапы разработки
- [ ] Настройка проекта Spring Boot
- [ ] Создание моделей данных
- [ ] Разработка репозиториев
- [ ] Разработка сервисов
- [ ] Создание REST контроллеров
- [ ] Настройка аутентификации
- [ ] Документация API
- [ ] Контейнеризация

## Прогресс
- [X] Инициализация проекта
- [X] Настройка Spring Boot
- [X] Создание контроллеров
- [X] Настройка базы данных
- [X] Создание Docker-образа
- [ ] Тестирование API
- [ ] Настройка безопасности
- [ ] Развертывание приложения

## Lessons
- При работе с Java-проектами без Maven необходимо тщательно учитывать транзитивные зависимости
- Ручная загрузка библиотек требует полного понимания графа зависимостей
- Рекомендуется использовать официальные образы с предустановленными инструментами сборки
- Важно внимательно проверять версии библиотек и их совместимость
- Использование многоступенчатой сборки в Docker значительно упрощает процесс компиляции
- Необходимо явно указывать параметры подключения к базе данных в переменных окружения

## Errors
- **[10.02.2025, 14:20]** На данный момент ошибок нет. Проект находится в стадии готовности к тестированию.
- **[10.02.2025, 14:50]** Проблемы с Docker-сборкой:
  * Не удается собрать образ из-за проблем с загрузкой PowerShell и зависимостей
  * Необходимо оптимизировать Dockerfile
- **[11.02.2025, 15:02]** Проблемы с компиляцией в Docker:
  * Не хватает полного набора зависимостей для компиляции
  * Необходимо настроить ручную компиляцию без Maven
  * Возможно, потребуется создать скрипт компиляции
- **[11.02.2025, 15:30]** Критические проблемы компиляции:
  * Отсутствуют транзитивные зависимости Spring Framework
  * Ручная загрузка библиотек не покрывает всех необходимых импортов
  * Требуется полный пересмотр стратегии сборки проекта
- **[11.02.2025, 15:45]** Проблемы с Maven-сборкой:
  * Не удается скомпилировать проект из-за неизвестной ошибки в импортах
  * Необходимо проверить зависимости и версии библиотек
  * Возможно, требуется обновление версий или перенастройка Maven

## Bug Logs
### Bug #1: Проблема подключения к базе данных PostgreSQL
- **Описание**: При запуске приложения возникает ошибка подключения к базе данных
- **Статус**: Не решено
- **Симптомы**: 
  - Ошибка в логах при попытке установить соединение с базой данных
  - Невозможность выполнить DDL-операции
- **Возможные причины**:
  - Неправильная конфигурация подключения
  - Проблемы с сетевым взаимодействием
  - Неверные учетные данные
- **Предпринятые действия**:
  - Проверены настройки `application.properties`
  - Изменены параметры подключения
  - Использован `host.docker.internal` для маршрутизации

## Lessons
- При работе с Docker и базами данных необходимо тщательно проверять сетевые настройки
- Использование `host.docker.internal` может не всегда работать корректно
- Важно добавлять подробное логирование для диагностики проблем подключения
- Необходимо проверять доступность базы данных до запуска приложения

## Текущие проблемы
- [X] Настроить Docker для сборки приложения
- [X] Проверить корректность подключения к базе данных

## Диагностика подключения к базе данных
### Текущие проблемы
- Ошибка подключения к базе данных
- Возможные причины:
  1. Неправильная конфигурация сети
  2. Проблемы с параметрами подключения

### Сетевая конфигурация
- Сетевой режим: `bridge`
- IP-адрес Docker: `172.17.0.2/16`
- Шлюз: `172.17.0.1`

### Логи приложения
```
FATAL: pas
transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection
```

### Следующие шаги
- [ ] Проверить параметры подключения к базе данных
- [ ] Настроить правильные параметры сети
- [ ] Добавить расширенное логирование

## Следующие шаги
- Запустить Docker-сборку
- Проверить работоспособность приложения через Docker Compose
